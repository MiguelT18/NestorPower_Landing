---
import { GlobalIcons } from "@assets/icons";
import { AnimatePresence, motion } from "framer-motion";
import Form from "./Form.tsx";
---

<button
  class="form-button group mx-auto flex cursor-pointer items-center justify-between gap-2 rounded-full bg-gradient-to-r from-[#de3f0d] to-[#ea0c0c] px-6 py-3 text-sm font-bold text-white uppercase shadow-[0_0_25px_rgba(234,12,12,0.6)] transition-transform duration-300 hover:scale-105 dark:from-[#dc2626] dark:to-[#ef4444]"
>
  Quiero unirme
  <GlobalIcons.Arrow
    customClass="size-8 group-hover:rotate-90 transition-duration duration-300"
  />
</button>

<dialog
  id="main-dialog"
  closedby="any"
  class="dark:bg-dark-bg-secondary m-auto w-full rounded-xl bg-white p-4 outline-none backdrop:backdrop-blur-sm md:max-w-[700px]"
>
  <div class="modal-content">
    <h1
      class="text-light-text-primary dark:text-dark-text-primary [&>span]:text-light-primary [&>span]:dark:text-dark-primary text-center text-2xl"
    >
      Primero tengo que saber <span>algunas cosas sobre ti</span>
    </h1>
    <Form client:only="React" />
  </div>
</dialog>

<script>
  document.addEventListener("DOMContentLoaded", () => {
    const $btns = document.querySelectorAll(".form-button");
    const $dialog = document.querySelector(
      "#main-dialog",
    ) as HTMLDialogElement | null;

    if (!$btns.length || !$dialog) return;

    $dialog.showModal();

    // âœ… Abrir el modal
    $btns.forEach((btn) => {
      btn.addEventListener("click", () => {
        $dialog.classList.remove("modal-closing");
        $dialog.showModal();
        document.body.style.overflow = "hidden";
      });
    });

    $dialog.addEventListener("close", () => {
      document.body.style.overflow = "auto";
    });
  });
</script>
